<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    <script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
    <!-- <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script> -->
    <script src="http://www.jq22.com/jquery/html5.min.js"></script>
    <!-- html5 for ie -->
    <link rel="stylesheet" type="text/css" href="https://www.jq22.com/jquery/animate-3.6.0.min.css">
    <style>
        body{font-family: Arial, Helvetica, sans-serif}
        body,p,h1{margin: 0;}
        ol,ul{list-style: none;margin: 0;padding: 0;}
        a{text-decoration:none;}
        #btn{
            position: fixed;
            top:80%;
            left: 80%;
        }
    </style>
</head>
<body>
    <div style="height:2000px;background:black;width:200px"></div>
    <button id="btn">2333</button>
    <script>
// function UnitBezier(p1x,p1y,p2x,p2y) {
//     this.cx = 3.0 * p1x;
//     this.bx = 3.0 * (p2x - p1x) - this.cx;
//     this.ax = 1.0 - this.cx -this.bx;    
//     this.cy = 3.0 * p1y;
//     this.by = 3.0 * (p2y - p1y) - this.cy;
//     this.ay = 1.0 - this.cy - this.by;
// }
// UnitBezier.prototype = {
// sampleCurveX : function(t) { //贝赛尔曲线t时刻的坐标点的X坐标
//     return ((this.ax * t + this.bx) * t + this.cx) * t;
// },
// sampleCurveY : function(t) {  //贝赛尔曲线t时刻的坐标点的y坐标
//     return ((this.ay * t + this.by) * t + this.cy) * t;
// },
// solve:function(t){
//     this.sampleCurveY(this.sampleCurveX(t))
//  }
// }

function CubicBezier( p0, p1, p2, p3 ) {
    this.p0 = p0;
    this.p1 = p1;
    this.p2 = p2;
    this.p3 = p3;
}

CubicBezier.prototype = {

    cal: function( t, a, b, c, d ) {
        var k = 1 - t;
        return k * k * k * a + 3 * k * k * t * b + 3 * ( 1 - t ) * t * t * c + t * t * t * d;
    },
    
    // 根据t获取曲线点坐标
    get: function( t ) {
        return {
        x: this.cal( t, this.p0.x, this.p1.x, this.p2.x, this.p3.x ),
            y: this.cal( t, this.p0.y, this.p1.y, this.p2.y, this.p3.y )
        }
    }
}
function CubicBezierLut( p0, p1, p2, p3, count ) {
    this.bezier = new CubicBezier( p0, p1, p2, p3 );
    this.lut = [];
    
    count = count || 100;

    var step = 1 / count;
    var t = 0;

    for ( var i = 0; i < count; i++ ) {
        this.lut.push( this.bezier.get( t ) );
        t += step;
    }
}

CubicBezierLut.prototype = {
    getYbyX: function( x ) {
        // 找一个最接近的点
        for ( var i = 0; i < this.lut.length - 1; i++ ) {
            var point = this.lut[ i ];
            var nextPoint = this.lut[ i + 1 ];
            if ( Math.abs( x - point.x ) <= Math.abs( x - nextPoint.x ) ) {
                return point.y;
            }
        }
        return null;
    }
}
    
        var sclTop;
        if(document.body.scrollTop==0){
            sclTop=document.documentElement;
        }else{
            sclTop=document.body
        }
        var stop=0;
        var sbody,sbodyxx;


        var timer=null
        var i=0;
        var ii;
        var stop;
        function run(){
            timer=setInterval(function(){
            // stop=stop+i++
            i+=10;
            ii=i/1000;
            stop=bz.getYbyX(ii)*sbody;
            sclTop.scrollTop=stop;
            if(sclTop.scrollTop==0){
                clearInterval(timer);
                sbody=0
            }
        },10)
        }
        var bz;
        var sbody10;
        var sbody17;
        var btn=document.getElementById('btn');
        btn.addEventListener('click',function(){
            clearInterval(timer);
            stop=0;i=0;
            sbody=sclTop.scrollTop;
            // sbody=sbodyxx;
            // sbody10=sbody/10;
            // sbody17=sbody10*7;
            bz=new CubicBezierLut( { x: 0, y:1 }, { x: 1, y: 0.4 }, { x: 0, y: 0.6 }, { x: 1, y: 0 }, 200 )
            run();
        })



    </script>
</body>
</html>